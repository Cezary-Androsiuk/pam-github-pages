<html>
<head>
    <script>
        function getLocation() {
            const locationNode = document.getElementById("location");
            if (!navigator.geolocation) {
                locationNode.innerHTML = "Geolocation is not supported by this browser.";
                return;
            }

            navigator.geolocation.getCurrentPosition((position) => {
                locationNode.innerHTML = 
                    "Latitude: " + position.coords.latitude +
                    "<br>" + 
                    "Longitude: " + position.coords.longitude;
            });
        }

        function getAcceleration(){
            console.log("getting Acceleration...")

            let gyroscope = new Gyroscope({ frequency: 60 });

            const gX = document.getElementById('gyroscopeX');
            const gY = document.getElementById('gyroscopeY');
            const gZ = document.getElementById('gyroscopeZ');
            const a = document.getElementById('alpha');
            const b = document.getElementById('beta');
            const g = document.getElementById('gamma');
            
            console.log(gyroscope)

            gyroscope.addEventListener("reading", (e) => {
                gX.innerHTML = "X: " + gyroscope.x.toFixed(2);
                gY.innerHTML = "Y: " + gyroscope.y.toFixed(2);
                gZ.innerHTML = "Z: " + gyroscope.z.toFixed(2);
                a.innerHTML = "a: " + gyroscope.alpha.toFixed(2);
                b.innerHTML = "b: " + gyroscope.beta.toFixed(2);
                g.innerHTML = "g: " + gyroscope.gamma.toFixed(2);
            });
            gyroscope.start();
        }

        function vibrate(){
            if ('vibrate' in navigator) {
                navigator.vibrate(200);
            } else {
                document.getElementById("vibrateLabel").innerHTML = "Vibration is not supported by this browser.";
            }
        }

        async function fullscreenAndOrientation(){
            const elem = document.documentElement; // Cała strona (<html>)

            if (!elem.requestFullscreen) {
                alert("Twoja przeglądarka nie wspiera trybu Fullscreen API.");
                return;
            }

            try {
                await elem.requestFullscreen();
                console.log('Wejście w tryb Fullscreen udane.');

                if ('orientation' in screen && typeof screen.orientation.lock === 'function') {
                    await screen.orientation.lock('landscape');
                    console.log('Orientacja zablokowana na landscape.');
                } else {
                    console.warn('Screen Orientation API (lock) nie jest wspierane.');
                }

            } catch (err) {
                // Obsługa błędów (np. użytkownik nie pozwolił)
                console.error('Nie udało się wejść w tryb Fullscreen lub zmienić orientacji:', err.message);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            
        })

    </script>
</head>
<body>
    <h1> commit 14 </h1>
    <button onclick="getLocation()">Get Location</button>
    <div id="location"></div>

    <br><br>
    <button onclick="getAcceleration()">Get Acceleration and Rotation</button>
    <div>
        <span id="gyroscopeX">X</span> <br>
        <span id="gyroscopeY">Y</span> <br>
        <span id="gyroscopeZ">Z</span> <br>

        <span id="alpha">a</span> <br>
        <span id="beta">b</span> <br>
        <span id="gamma">c</span> <br>
    </div>

    <br><br>
    <button onclick="vibrate()">Vibrate</button>
    <div id="vibrateLabel"></div>

    <button onclick="fullscreenAndOrientation()"> Fullscreen and Orientation </button>

</body>
</html>